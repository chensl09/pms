<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.mmd.pms.user.dao.UserDao">

    <cache type="org.mybatis.caches.ehcache.EhcacheCache" />

    <sql id="userColumns">
        u.id,
        u.login_name as "loginName",
        u.user_type as "userType",
        u.salt,
        u.password,
        u.name,
        u.email,
        u.phone,
        u.mobile,
        u.login_ip as "loginIp",
        u.login_date as "loginDate",
        u.login_flag as "loginFlag",
        u.create_by as "createBy.id",
        u.create_date as "createDate",
        u.update_by as "updateBy.id",
        u.update_date as "updateDate",
        u.remarks
    </sql>

    <select id="queryList" parameterType="User" resultType="User">

    </select>

    <select id="queryUserByLoginName" resultType="User" parameterType="User">
        SELECT <include refid="userColumns" />
        FROM pms_user u
        WHERE u.login_name = #{loginName}
        and u.user_type=#{userType}
        and u.del_flag = #{DEL_FLAG_NORMAL}
    </select>

</mapper>